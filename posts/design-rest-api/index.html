<!doctype html><html lang=en><head><title>How to design a REST API? :: Anver Bogatov</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The article explains in a very easy and accessible manner simple and what is more important working way to design new REST API for applications."><meta name=keywords content="api,design,restapi"><meta name=robots content="noodp"><link rel=canonical href=/posts/design-rest-api/><script async src="https://www.googletagmanager.com/gtag/js?id=G-QX8WGB4JN0"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QX8WGB4JN0',{anonymize_ip:!1})}</script><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="How to design a REST API?"><meta property="og:description" content="The article explains in a very easy and accessible manner simple and what is more important working way to design new REST API for applications."><meta property="og:url" content="/posts/design-rest-api/"><meta property="og:site_name" content="Anver Bogatov"><meta property="og:image" content="https://miro.medium.com/max/10944/0*7Uc8p5VVguHJA6GU"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-11-20 18:55:34 +0400 +0400"></head><body class=green><div class="container center headings--one-size"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-QX8WGB4JN0"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QX8WGB4JN0',{anonymize_ip:!1})}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-QX8WGB4JN0','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Anver Bogatov</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/showcase>Posts</a></li><li><a href=/about>About me</a></li><li><a href=/reviews>Reviews</a></li><li><a href=/support>üí∞</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>üá¨üáß English ‚ñæ</li></ul><ul class="language-selector__more hidden"><li><a href=/>üá¨üáß English</a></li><li><a href=/ru/>üá∑üá∫ –†—É—Å—Å–∫–∏–π</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/showcase>Posts</a></li><li><a href=/about>About me</a></li><li><a href=/reviews>Reviews</a></li><li><a href=/support>üí∞</a></li><hr><li><a href=/>üá¨üáß English</a></li><li><a href=/ru/>üá∑üá∫ –†—É—Å—Å–∫–∏–π</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/design-rest-api/>How to design a REST API?</a></h1><div class=post-meta><span class=post-date>2021-11-20</span>
<span class=post-author>:: Anver Bogatov</span></div><span class=post-tags>#<a href=/tags/design/>design</a>&nbsp;
#<a href=/tags/restapi/>restapi</a>&nbsp;</span>
<img src=https://miro.medium.com/max/10944/0*7Uc8p5VVguHJA6GU class=post-cover alt="How to design a REST API?"><div class=post-content><div><h1 id=what-is-api>What is API?<a href=#what-is-api class=hanchor arialabel=Anchor>&#8983;</a></h1><p><strong>API or Application Programming Interface</strong> ‚Äî is a description of communication between two programs.</p><p>To be even more precise, an API is a set of classes, interfaces, or data structures that are defined by the program that owns the API.</p><p>With the API, you can make a program do something. What exactly - defined by the API.</p><p><strong>There are many APIs exist</strong>.</p><p>For example, Java itself gives access to dozens of APIs to developers: Core API, Concurrency API, Collection API and many more.</p><p>Other frameworks define their own APIs:¬†Hibernate API, JPA (Java Persistence API), RestEasy, and so on.</p><p><strong>Each of the APIs has its own goal</strong>.</p><p>APIs are not created just for fun. Each of the APIs is like a TV remote control. It gives an opportunity to control the application.</p><p>For example, an application for disk space usage analysis can contain an API that allows getting statistics on files and the space they take; this will point to the heaviest file on the disk drive and so on.</p><p>At the same time, the API does not allow doing any random stuff. All the capabilities of the API are consistent with its goal.</p><p><strong>APIs do not belong to concrete technology</strong>.</p><p>If an application is written in Java, that does not mean that the API will be limited to that particular programming language. Applications can communicate through APIs written using different technologies and programming languages.</p><p>For example, REST API.</p><h1 id=what-is-rest-api>What is REST API?<a href=#what-is-rest-api class=hanchor arialabel=Anchor>&#8983;</a></h1><p>REST or Representational State Transfer is an architectural approach based on the HTTP protocol.</p><h1 id=why-do-you-need-to-design-a-rest-api>Why do you need to design a REST API?<a href=#why-do-you-need-to-design-a-rest-api class=hanchor arialabel=Anchor>&#8983;</a></h1><p><strong>Application development is like collecting a puzzle without hard rules</strong>.</p><p>Everybody can win that game. But the true mastery of software engineering is writing software applications that will work quickly, without errors, and will be extensible.</p><p>That is why, as in house building, you need to know everything beforehand, because the cost of a mistake on</p><p>design stage cheaper than the cost of a mistake at the moment when the house is built.</p><h1 id=domain-driven-design-of-rest-api>Domain driven design of REST API<a href=#domain-driven-design-of-rest-api class=hanchor arialabel=Anchor>&#8983;</a></h1><p><strong>Technique that I am going to share today</strong> is well described in Manning&rsquo;s book - &ldquo;The Design of Web APIs&rdquo; [1].</p><p>The link to the book can be found at the bottom of the page.</p><p><strong>Small input</strong>, before I will explain the method. All the ideas below are highly oriented onto practice.</p><p>The method is not just a dry theory, but rather a live method of REST API design. Thus, we will talk about it using live</p><p>example. Imagine that we need to design a REST API for some blog service. To be precise, we will work with</p><p>posts and their comments. Using that requirement as an example, we will use the method.</p><p><strong>What goals such API can have?</strong> There can be even multiple goals:</p><ul><li><p>Read posts. There should be a way to read existing posts.</p></li><li><p>Modify posts. What if there is a mistake in a particular post? It&rsquo;s author must have a way to fix the mistake after post was published.</p></li><li><p>Create post. Posts must be added to our service somehow.</p></li><li><p>Delete post. When author decided to remove own post.</p></li><li><p>Read post&rsquo;s comments. For brevity&rsquo;s sake, let&rsquo;s agree that comments are added to our service some other way.</p></li></ul><p>These goals we will translate to our REST API.</p><p><strong>Now, let&rsquo;s define main rules</strong>:</p><ul><li><p>Goals are translated to <strong>resources</strong> and <strong>actions</strong></p></li><li><p><strong>Resources</strong> are expressed as paths in REST API, and <strong>actions</strong> are expressed as HTTP protocol&rsquo;s methods.</p></li></ul><p><strong>What is a resource?</strong> Resource is an object, a view, or an entity - literally it can be anything that means some data</p><p>in the service. There are two resources in our blog service - Post and Comment.</p><p><strong>What is action?</strong> Action is a way to ask our blog service to do something, for example, to get existing posts or</p><p>to create a new one. Actions are expressed as methods of HTTP protocol, as was said above. The HTTP protocol defines</p><p>multiple such methods, but we are interested in standard ones: GET, POST, PUT, DELETE.</p><p><strong>Now, let&rsquo;s go to the method</strong>. Let&rsquo;s break it down into steps:</p><ul><li><p>First of all, we need to define all the resources and sub-resources with which our API must work. In our case, these are <strong>Post</strong> and <strong>Comment</strong>.</p></li><li><p>Next, we need to define a list of actions that our API must allow us to do. For us, the list is the following:</p></li></ul><ol><li><p>GET Post ‚Äî for access to existing posts</p></li><li><p>POST Post ‚Äî for new post creation</p></li><li><p>PUT Post ‚Äî for existing post modification</p></li><li><p>DELETE Post ‚Äî for existing post deletion</p></li><li><p>GET Comment ‚Äî for access to the existing post&rsquo;s comments</p></li></ol><ul><li>Let&rsquo;s define a list of parameters for the actions from above:</li></ul><ol><li><p>GET posts action can be called without parameters, and that will lead to access to all of the existing posts. It can also be called with the identifier of a concrete post and will return only the post with the identifier specified as a parameter.</p></li><li><p>POST action implies that there should be new post data used for new post creation.</p></li><li><p>PUT action requires two parameters ‚Äîthe identifier of the post that we will modify and the post&rsquo;s data that will replace existing data.</p></li><li><p>DELETE action requires to have post&rsquo;s id to know which of the posts must be deleted</p></li><li><p>GET post&rsquo;s comments action requires identifier of the post for which comments must be returned</p></li></ol><p><strong>Let&rsquo;s stop for a second</strong>.</p><p>We did a huge preparation to get as much information as we can about our future API. And now we know how our API should work.</p><p>But that information is not enough, and we need to collect additional information. That we will do right now.</p><p>What else do we need to know? Basically, we need to answer onto following questions:</p><ul><li><p>Who will use our API?</p></li><li><p>What and how exactly that &lsquo;who&rsquo; will do with our API?</p></li></ul><p>There is a special structure we can use specifically to collect all information we need. It can be represented as a table</p><p>with predefined list of columns:</p><ul><li><p><strong>Who</strong> ‚Äî means users, persons, roles, clients and so on; it means who will use our API</p></li><li><p><strong>What</strong> ‚Äî means expectations of the user about our API (&ldquo;what to expect?")</p></li><li><p><strong>How</strong> ‚Äî means how we will reach his goal</p></li><li><p><strong>Input</strong> ‚Äî data that must be given to our API so that it can help our user reach his goal</p></li><li><p><strong>Output</strong> ‚Äî data that will be returned to the user as the result</p></li><li><p><strong>Goal</strong> ‚Äî describes goal of particular operation</p></li><li><p><strong>HTTP method</strong> ‚Äî points onto HTTP method that describes an action that our user does</p></li><li><p><strong>URI</strong> ‚Äî path to particular API operation</p></li></ul><p><img src=/images/design-rest-api/1.en.png alt=design-rest-api-table-1></p><p><strong>All is left to do is fill in the table</strong> with data based on the information we gathered. Let&rsquo;s try to do that for GET posts operation:</p><p><img src=/images/design-rest-api/2.en.png alt=design-rest-api-table-2></p><p><strong>Let&rsquo;s look closer on it</strong>. We work with posts. That means that somebody needs to write them. So, every post has its own Author.</p><p>The author can get access to all of his posts. For that, we do not need to provide any specific input and under the hood implementation of the API</p><p>can detect current user and detect his posts. As the output we will have a list of posts written by current user (Author).</p><p>Read operation in HTTP protocol expressed as GET method. And finally according to commonly used approach URI must end with</p><p>name of the resource. In our case it will be <code>.../posts</code>.</p><p><strong>During filling in the table, always aks yourself following questions</strong> - where are resources from? who works with them? and so on.</p><p>The bigger picture you will try to see, the more cases you can identify on the design stage. Simple example:</p><p>We have designed operation of getting the posts, but who had added them before? Author, of course. Let&rsquo;s design that as well:</p><p><img src=/images/design-rest-api/3.en.png alt=design-rest-api-table-3></p><p>Using same approach <strong>let&rsquo;s design rest of operations</strong>:</p><p><img src=/images/design-rest-api/4.en.png alt=design-rest-api-table-4></p><p><strong>Pay attention onto last row</strong>. We have discussed sub-resources before. On the screenshot from above you can notice how URI</p><p>for sub-resources access can look like. In our example, how URI for accessing post&rsquo;s comments can look like. At the beginning of the path</p><p>name of the parent resource must be given and only after that name of sub-resource can be used. According to that</p><p>the schema for URI can look like this: <code>/api/[resource]/{id}/[sub-resource]</code>. This is a commonly used practice and URIs like this allow</p><p>your users to understand which of resources depends on others.</p><p><strong>As an outro, we need to ask ourselves one question - Will the API we have designed fit all the cases in any situations? Of course - not</strong>.</p><p>If you look onto the table closer, it becomes clear for you that the API we have designed is intended to be used only by Authors.</p><p>Author can read only own posts, but users of blog service must have access to all posts of all authors. Such requirements (you can also call them as constraints)</p><p>become visible during design stage, only if you try to get the big picture by asking yourself questions about your resources, actions, users, cases and so on.</p><p><strong>I hope that this article will help you</strong> to understand that REST APIs can be designed using simple and formalised algorithm.</p><h1 id=useful-links>Useful links<a href=#useful-links class=hanchor arialabel=Anchor>&#8983;</a></h1><ul><li>[1] &ldquo;The Design of Web APIs&rdquo; book <a href=https://www.manning.com/books/the-design-of-web-apis>on Manning</a></li></ul></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>¬© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script><script src=/assets/languageSelector.js></script></div></body></html>