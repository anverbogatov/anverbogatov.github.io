<!DOCTYPE html>
<html lang="en">
   <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-control" content="public">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="hexed bits, apps, iOS, objective-c, swift, cocoa, apple, xcode, app store, software, programming, engineering, design patterns">
    <meta name="description" content="Бесконечность - не предел.">
    <meta name="author" content="Anver Bogatov">

    <title>
        
            Namespaced constants in Swift &middot; Anver Bogatov
        
    </title>

    <!-- Begin Jekyll SEO tag v2.2.3 -->
<meta property="og:title" content="Namespaced constants in Swift" />
<meta name="author" content="Anver Bogatov" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Mike Ash has a great Friday Q&amp;A on namespaced constants and functions in C. It is a powerful and elegant technique to avoid using #define and verbose Objective-C prefixes. Although Swift types are namespaced by their module, we can still benefit from implementing this pattern with struct and enum types. I’ve been experimenting with this approach for constants in Swift and it has been incredibly useful." />
<meta property="og:description" content="Mike Ash has a great Friday Q&amp;A on namespaced constants and functions in C. It is a powerful and elegant technique to avoid using #define and verbose Objective-C prefixes. Although Swift types are namespaced by their module, we can still benefit from implementing this pattern with struct and enum types. I’ve been experimenting with this approach for constants in Swift and it has been incredibly useful." />
<link rel="canonical" href="http://localhost:4000/blog/swift-namespaced-constants/" />
<meta property="og:url" content="http://localhost:4000/blog/swift-namespaced-constants/" />
<meta property="og:site_name" content="Anver Bogatov" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-07-19T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@anver_bogatov" />
<meta name="twitter:creator" content="@anver_bogatov" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Namespaced constants in Swift","author":{"@type":"Person","name":"Anver Bogatov"},"datePublished":"2015-07-19T00:00:00+00:00","dateModified":"2015-07-19T00:00:00+00:00","description":"Mike Ash has a great Friday Q&amp;A on namespaced constants and functions in C. It is a powerful and elegant technique to avoid using #define and verbose Objective-C prefixes. Although Swift types are namespaced by their module, we can still benefit from implementing this pattern with struct and enum types. I’ve been experimenting with this approach for constants in Swift and it has been incredibly useful.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/img/logo.png"},"name":"Anver Bogatov"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/swift-namespaced-constants/"},"url":"http://localhost:4000/blog/swift-namespaced-constants/"}</script>
<!-- End Jekyll SEO tag -->


    <meta name="twitter:image" content="/img/logo.png" />
    <meta property="og:image" content="/img/logo.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />

    <link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/bower_components/ubuntuMono/ubuntuMono.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="/bower_components/html5shiv/dist/html5shiv.min.js"></script>
      <script src="/bower_components/respond/dest/respond.min.js"></script>
    <![endif]-->

    <link rel="apple-touch-icon" sizes="76x76" href="/ico/icon76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/ico/icon120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/ico/icon152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/ico/icon167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/ico/icon180.png">

    <link rel="shortcut icon" href="/favicon.ico">
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Anver Bogatov" />

    <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
         ga('create', 'UA-37319916-5', 'auto');
         ga('send', 'pageview');
    </script>
</head>

   <body>
      
<header class="container container-fluid">
   <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <h1 class="text-center"><a href="/">Anver Bogatov</a></h1>
        <div class="col-md-12 col-sm-12 col-xs-12">
            <h2 class="tagline">&mdash; Бесконечность - не предел. &mdash;</h2>
         </div> <!-- col -->
      </div> <!-- col -->
   </div> <!-- row -->

   <div class="row menu">
      <div class="col-md-12 col-sm-12 col-xs-12">
         <a class="btn btn-default" href="/">Блог</a>
         <!-- <a class="btn btn-default" href="/speaking/">Speaking</a> -->
         <a class="btn btn-default" href="/about/">Обо мне</a>
      </div> <!-- col -->
   </div> <!-- row -->
   <hr>
</header>


      <div class="container container-fluid">
         <div class="row">
            <div class="col-sm-12 col-sm-offset-0 col-md-10 col-md-offset-1">
               <article>
   <h1 class="post-title"><a href="">Namespaced constants in Swift</a></h1>
   <h2 class="post-subtitle">Using nested types for clarity <small class="post-date">19 Jul 2015</small></h2>
   
      <small class="text-danger"><strong>Updated: 23 July 2015</strong></small>
   

   <div class="post-content">
      <p>Mike Ash has a great <a href="https://www.mikeash.com/pyblog/friday-qa-2011-08-19-namespaced-constants-and-functions.html">Friday Q&amp;A</a> on namespaced constants and functions in C. It is a powerful and elegant technique to avoid using <code class="highlighter-rouge">#define</code> and verbose Objective-C prefixes. Although Swift types are namespaced by their module, we can still benefit from implementing this pattern with <code class="highlighter-rouge">struct</code> and <code class="highlighter-rouge">enum</code> types. I’ve been experimenting with this approach for constants in Swift and it has been incredibly useful.</p>

<!--excerpt-->

<h3 id="icon-image-assets">Icon image assets</h3>

<p>We are all familiar with handling assets, particularly icons, using the <code class="highlighter-rouge">UIImage(named:)</code> API. And since iOS 7, many icons have two distinct visual states — <em>lined</em> and <em>filled</em>, or <em>normal</em> and <em>selected</em>. Thus, we find ourselves with two versions of each icon, for example <code class="highlighter-rouge">UIImage(named:"music")</code> and <code class="highlighter-rouge">UIImage(named:"music-selected")</code>.</p>

<p><img class="img-thumbnail img-responsive center" src="/img/tabbar.png" title="iOS Tab Bar" alt="iOS Tab Bar" />
<small class="text-muted center">iOS Tab Bar, taken from <a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Bars.html#//apple_ref/doc/uid/TP40006556-CH12-SW1" target="_blank">iOS Human Interface Guidelines</a>.</small></p>

<p>In the past, we strove to avoid <a href="https://corner.squareup.com/2014/02/objc-codegenutils.html">stringly-typed</a> Objective-C in Cocoa by creating constants or categories. But rather than apply these same techniques in Swift with an <code class="highlighter-rouge">extension</code>, we can do something more sophisticated.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="kt">Icon</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">Music</span>
    <span class="k">case</span> <span class="kt">Movies</span>
    <span class="k">case</span> <span class="kt">TVShows</span>
    <span class="k">case</span> <span class="kt">Search</span>
    <span class="k">case</span> <span class="kt">More</span>

    <span class="kd">func</span> <span class="nf">image</span><span class="p">(</span><span class="n">selected</span> <span class="nv">selected</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIImage</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="n">selected</span> <span class="p">?</span> <span class="k">self</span><span class="o">.</span><span class="n">rawValue</span> <span class="o">+</span> <span class="s">"-selected"</span> <span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">rawValue</span><span class="p">)</span><span class="o">!</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="k">let</span> <span class="nv">icon</span> <span class="o">=</span> <span class="kt">Icon</span><span class="o">.</span><span class="kt">Music</span><span class="o">.</span><span class="nf">image</span><span class="p">()</span> <span class="c1">// "music" icon</span>
<span class="k">let</span> <span class="nv">iconSelected</span> <span class="o">=</span> <span class="kt">Icon</span><span class="o">.</span><span class="kt">Music</span><span class="o">.</span><span class="nf">image</span><span class="p">(</span><span class="nv">selected</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">// "music-selected" icon</span></code></pre></figure>

<p>In this example, we are using the new <a href="http://ericasadun.com/2015/07/08/swift-new-stuff-in-xcode-7-beta-3/">default enum naming</a> for enums with a string raw type. This alone makes a huge difference — no explicit, hard-coded strings at all! We now have constants for all of our icon names, and the <code class="highlighter-rouge">image(selected:)</code> method will return the correct <code class="highlighter-rouge">UIImage</code>.</p>

<p>You may be thinking that we could implement an extension on <code class="highlighter-rouge">UIImage</code> instead. But the goal here is proper namespacing, which makes our code easier to read and easier to write. With an extension, we are essentially in the <code class="highlighter-rouge">UIImage</code> namespace and I would argue that this functionality is not really appropriate to add to the <code class="highlighter-rouge">UIImage</code> class globally. By creating a new type, we create our own namespace. We immediately know we are dealing with icon assets when reading and writing code. We can get precise code-completion suggestions from our editor without having to remember what kind of naming conventions our teammate used for the new methods on <code class="highlighter-rouge">UIImage</code> — was it <em>musicIcon</em> and <em>musicSelectedIcon</em>, or <em>iconMusic</em> and <em>iconMusicSelected</em>? Instead, we can simply begin typing <code class="highlighter-rouge">Icon.</code> and let the editor tell us what icons are available.</p>

<h3 id="custom-colors">Custom colors</h3>

<p>Another common use case for constants, or a Swift extension are for the custom colors in an app. It would be nice to be able to use an enum in this scenario, but an enum raw value type must be a <strong>value type</strong> — sorry <code class="highlighter-rouge">UIColor</code>. Alternatively, we can use structs and nested structs.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">ColorPalette</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">Red</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.1491</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">Green</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.5628</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.3188</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">Blue</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.3285</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.5749</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="kd">struct</span> <span class="kt">Gray</span> <span class="p">{</span>
        <span class="kd">static</span> <span class="k">let</span> <span class="nv">Light</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">white</span><span class="p">:</span> <span class="mf">0.8374</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="kd">static</span> <span class="k">let</span> <span class="nv">Medium</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">white</span><span class="p">:</span> <span class="mf">0.4756</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="kd">static</span> <span class="k">let</span> <span class="nv">Dark</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">white</span><span class="p">:</span> <span class="mf">0.2605</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="k">let</span> <span class="nv">red</span> <span class="o">=</span> <span class="kt">ColorPalette</span><span class="o">.</span><span class="kt">Red</span>
<span class="k">let</span> <span class="nv">darkGray</span> <span class="o">=</span> <span class="kt">ColorPalette</span><span class="o">.</span><span class="kt">Gray</span><span class="o">.</span><span class="kt">Dark</span></code></pre></figure>

<p>Again, we should not add our custom colors to <code class="highlighter-rouge">UIColor</code> globally via an extension. For colors, using an extension presents even more challenges regarding naming. For example if you have a custom red color, you cannot name the method <code class="highlighter-rouge">redColor()</code> because <code class="highlighter-rouge">UIColor</code> already defines this class method. Do you name your method <code class="highlighter-rouge">red()</code>? That’s kind of awkward. Do you prefix the method name like you would in Objective-C, <code class="highlighter-rouge">jsq_redColor()</code>? That’s <em>more</em> awkward in Swift. Given light and dark versions of colors, do you use <code class="highlighter-rouge">darkPurple()</code>, or <code class="highlighter-rouge">purpleDark()</code>? If you have many dark and light variants, it might be better to use the <code class="highlighter-rouge"><span class="p">{</span><span class="err">colorName</span><span class="p">}{</span><span class="err">variant</span><span class="p">}</span></code> naming convention. Regardless, everyone on your team will have different opinions on naming — and they will <em><strong>all</strong> be great!</em></p>

<p>Luckily we can avoid the naming wars (hopefully). Using nested structs gives us our own namespace with much richer semantics, avoids naming collisions with <code class="highlighter-rouge">UIColor</code>, and provides precise code-completion from our editor.</p>

<h3 id="storyboards-and-beyond">Storyboards and beyond</h3>

<p>What is most interesting here is realizing how <strong>extensions can limit our design space</strong>. (And the same applies to categories in Objective-C.) It is not hard to imagine how we could apply these techniques with regard to other resources in our apps: storyboards, xibs, or sound effects. You could even nest enums inside of structs, or enums inside of enums. So far, I’ve found this pattern of namespaced constants to be extremely useful.</p>

<p>Let me know what you think! You can find me <a href="http://twitter.com/jesse_squires">on Twitter</a>.</p>

<p><span class="text-muted"><strong>Note:</strong> There have been some attempts to automate something similar to what I have described, like <a href="https://github.com/indragiek/swiftrsrc">swiftrsrc</a> and <a href="https://github.com/krzyzanowskim/Natalie">Natalie</a>, but not exactly. Some of the deeper nesting might be difficult to automate, but I have yet to try this.</span></p>

<p class="alert alert-danger">
   <strong>Update</strong> <span class="pull-right"><em>23 July 2015</em></span>
   <br />
   Inspired by this post, <a href="https://twitter.com/leemorgan" class="alert-link" target="_blank">Lee Morgan</a> has written a build script that generates a Swift source file based on Xcode assets. Checkout the repo <a href="https://github.com/leemorgan/AutoAssets" class="alert-link" target="_blank">AutoAssets</a> on GitHub. Thanks Lee!
</p>

   </div> <!-- post-content -->
</article>


<div class="post-share-subscribe">
   <div class="row">
      <div class="col-md-6 col-sm-6 col-xs-12 center">
         <div class="btn-group btn-group-justified" role="group">

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Share &nbsp;<i class="fa fa-share-alt" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li>
                     <a href="https://twitter.com/intent/tweet?text=Namespaced%20constants%20in%20Swift%20http://localhost:4000/blog/swift-namespaced-constants/%20via%20@anver_bogatov" title="Tweet" target="_blank">
                     Twitter &nbsp;<i class="fa fa-twitter" aria-hidden="true"></i>
                     </a>
                  </li>
                  <li>
                     <a href="https://www.facebook.com/sharer.php?u=http://localhost:4000/blog/swift-namespaced-constants/" title="Post" target="_blank">
                     Facebook &nbsp;<i class="fa fa-facebook" aria-hidden="true"></i>
                     </a>
                  </li>
                  <li>
                     <a href="https://plus.google.com/share?url=http://localhost:4000/blog/swift-namespaced-constants/" title="Share" target="_blank">
                     Google &nbsp;<i class="fa fa-google-plus" aria-hidden="true"></i>
                     </a>
                  </li>
               </ul>
            </div> <!-- share dropup -->

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Subscribe &nbsp;<i class="fa fa-rss" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li><a href="/feed.xml" title="Subscribe via RSS/atom">RSS/Atom &nbsp;<i class="fa fa-rss" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Add to Apple News">Apple News &nbsp;<i class="fa fa-apple" aria-hidden="true"></i></a></li>
               </ul>
            </div> <!-- subscribe drop-up -->

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Support &nbsp;<i class="fa fa-star" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li><a href="" title="Donate via PayPal" target="_blank">Donate via PayPal &nbsp;<i class="fa fa-paypal" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Donate via Square Cash" target="_blank">Donate via Square &nbsp;<i class="fa fa-dollar" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Donate Bitcoin" target="_blank">Donate Bitcoin &nbsp;<i class="fa fa-btc" aria-hidden="true"></i></a></li>
               </ul>
            </div> <!-- donate drop-up -->

         </div> <!-- btn-group -->
      </div> <!-- col -->
   </div> <!-- row -->

   <div class="row feedback">
      <div class="col-md-6 col-sm-6 col-xs-12 center">
         <p class="text-muted text-center"><small><b>Questions? Feedback? Corrections?</b></small></p>
         <p class="text-muted text-center"><small>
         Open an <a href="https://github.com/anverbogatov/anverbogatov.github.io/issues/new" target="_blank">issue</a> or
         submit a <a href="https://github.com/anverbogatov/anverbogatov.github.io/compare" target="_blank">pull request</a>.
         </small></p>
      </div> <!-- col -->
   </div> <!-- row -->

</div> <!-- post-share-subscribe -->


            </div> <!-- col -->
         </div> <!-- row -->
      </div> <!-- container -->

      
<footer class="container container-fluid">
   <hr>

   <div class="row contact">
    <div class="col-sm-12 col-sm-offset-0 col-md-8 col-md-offset-2">
        <ul class="inline center">
            <li><a href="https://github.com/anverbogatov" title="Follow me on Github"><i class="fa fa-2x fa-github" aria-hidden="true"></i></a></li>
            <li><a href="https://twitter.com/anver_bogatov" title="Follow me on Twitter"><i class="fa fa-2x fa-twitter" aria-hidden="true"></i></a></li>
            <li><a href="https://www.linkedin.com/in/anver-bogatov-64b32661/" title="Connect with me on LinkedIn"><i class="fa fa-2x fa-linkedin" aria-hidden="true"></i></a></li>
            <li><a href="/feed.xml" title="Subscribe via RSS/atom"><i class="fa fa-2x fa-rss-square" aria-hidden="true"></i></a></li>
            <li><a href="" title="Add to Apple News"><i class="fa fa-2x fa-apple" aria-hidden="true"></i></a></li>
        </ul>
    </div> <!-- col -->
</div> <!-- row -->


   <p class="text-muted text-center"><small>
   &copy; 2017 Anver Bogatov.
   This site is <a href="https://github.com/anverbogatov/anverbogatov.github.io">open source</a>.
   </small></p>
</footer>

      
<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

   </body>
</html>
