<!DOCTYPE html>
<html lang="en">
   <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-control" content="public">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="hexed bits, apps, iOS, objective-c, swift, cocoa, apple, xcode, app store, software, programming, engineering, design patterns">
    <meta name="description" content="Бесконечность - не предел.">
    <meta name="author" content="Anver Bogatov">

    <title>
        
            Swift enumerations and equatable &middot; Anver Bogatov
        
    </title>

    <!-- Begin Jekyll SEO tag v2.2.3 -->
<meta property="og:title" content="Swift enumerations and equatable" />
<meta name="author" content="Anver Bogatov" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Recently, I came across a case (pun intended) where I needed to compare two instances of an enum type in Swift. However, it was an enum where some cases had associated values. At first glance, it is not obvious how to do this." />
<meta property="og:description" content="Recently, I came across a case (pun intended) where I needed to compare two instances of an enum type in Swift. However, it was an enum where some cases had associated values. At first glance, it is not obvious how to do this." />
<link rel="canonical" href="http://localhost:4000/blog/swift-enumerations-and-equatable/" />
<meta property="og:url" content="http://localhost:4000/blog/swift-enumerations-and-equatable/" />
<meta property="og:site_name" content="Anver Bogatov" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-07-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@anver_bogatov" />
<meta name="twitter:creator" content="@anver_bogatov" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Swift enumerations and equatable","author":{"@type":"Person","name":"Anver Bogatov"},"datePublished":"2015-07-26T00:00:00+00:00","dateModified":"2015-07-26T00:00:00+00:00","description":"Recently, I came across a case (pun intended) where I needed to compare two instances of an enum type in Swift. However, it was an enum where some cases had associated values. At first glance, it is not obvious how to do this.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/img/logo.png"},"name":"Anver Bogatov"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/swift-enumerations-and-equatable/"},"url":"http://localhost:4000/blog/swift-enumerations-and-equatable/"}</script>
<!-- End Jekyll SEO tag -->


    <meta name="twitter:image" content="/img/logo.png" />
    <meta property="og:image" content="/img/logo.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />

    <link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/bower_components/ubuntuMono/ubuntuMono.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="/bower_components/html5shiv/dist/html5shiv.min.js"></script>
      <script src="/bower_components/respond/dest/respond.min.js"></script>
    <![endif]-->

    <link rel="apple-touch-icon" sizes="76x76" href="/ico/icon76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/ico/icon120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/ico/icon152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/ico/icon167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/ico/icon180.png">

    <link rel="shortcut icon" href="/favicon.ico">
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Anver Bogatov" />

    <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
         ga('create', 'UA-37319916-5', 'auto');
         ga('send', 'pageview');
    </script>
</head>

   <body>
      
<header class="container container-fluid">
   <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <h1 class="text-center"><a href="/">Anver Bogatov</a></h1>
        <div class="col-md-12 col-sm-12 col-xs-12">
            <h2 class="tagline">&mdash; Бесконечность - не предел. &mdash;</h2>
         </div> <!-- col -->
      </div> <!-- col -->
   </div> <!-- row -->

   <div class="row menu">
      <div class="col-md-12 col-sm-12 col-xs-12">
         <a class="btn btn-default" href="/">Блог</a>
         <!-- <a class="btn btn-default" href="/speaking/">Speaking</a> -->
         <a class="btn btn-default" href="/about/">Обо мне</a>
      </div> <!-- col -->
   </div> <!-- row -->
   <hr>
</header>


      <div class="container container-fluid">
         <div class="row">
            <div class="col-sm-12 col-sm-offset-0 col-md-10 col-md-offset-1">
               <article>
   <h1 class="post-title"><a href="">Swift enumerations and equatable</a></h1>
   <h2 class="post-subtitle">Implementing equatable for enums with associated values <small class="post-date">26 Jul 2015</small></h2>
   

   <div class="post-content">
      <p>Recently, I came across a <strong>case</strong> (<em>pun intended</em>) where I needed to compare two instances of an <code class="highlighter-rouge">enum</code> type in Swift. However, it was an <code class="highlighter-rouge">enum</code> where some cases had <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Enumerations.html#//apple_ref/doc/uid/TP40014097-CH12-ID148">associated values</a>. At first glance, it is not obvious how to do this.</p>

<!--excerpt-->

<p>As you likely know, if you want to compare two instances of a type in Swift, then that type must conform to the <a href="http://nshipster.com/swift-comparison-protocols/">Equatable</a> protocol. In other words, you must define the <code class="highlighter-rouge">==</code> operator for the type.
If the enumeration does not have associated values or if it has a raw-value type, then you get the <code class="highlighter-rouge">==</code> operator for free from the Swift <a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Reference/SwiftStandardLibraryReference/index.html">Standard Library</a>. For example:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// With a raw-value</span>
<span class="c1">// Double conforms to Equatable</span>
<span class="kd">enum</span> <span class="kt">Math</span><span class="p">:</span> <span class="kt">Double</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">Pi</span> <span class="o">=</span> <span class="mf">3.1415</span>
    <span class="k">case</span> <span class="kt">Phi</span> <span class="o">=</span> <span class="mf">1.6180</span>
    <span class="k">case</span> <span class="kt">Tau</span> <span class="o">=</span> <span class="mf">6.2831</span>
<span class="p">}</span>

<span class="kt">Math</span><span class="o">.</span><span class="kt">Pi</span> <span class="o">==</span> <span class="kt">Math</span><span class="o">.</span><span class="kt">Pi</span> <span class="c1">// true</span>
<span class="kt">Math</span><span class="o">.</span><span class="kt">Tau</span> <span class="o">==</span> <span class="kt">Math</span><span class="o">.</span><span class="kt">Phi</span> <span class="c1">// false</span>
<span class="kt">Math</span><span class="o">.</span><span class="kt">Tau</span> <span class="o">!=</span> <span class="kt">Math</span><span class="o">.</span><span class="kt">Phi</span> <span class="c1">// true</span>

<span class="c1">// Without a raw-value</span>
<span class="kd">enum</span> <span class="kt">CompassPoint</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">North</span>
    <span class="k">case</span> <span class="kt">South</span>
    <span class="k">case</span> <span class="kt">East</span>
    <span class="k">case</span> <span class="kt">West</span>
<span class="p">}</span>

<span class="kt">CompassPoint</span><span class="o">.</span><span class="kt">North</span> <span class="o">==</span> <span class="kt">CompassPoint</span><span class="o">.</span><span class="kt">North</span> <span class="c1">// true</span>
<span class="kt">CompassPoint</span><span class="o">.</span><span class="kt">South</span> <span class="o">==</span> <span class="kt">CompassPoint</span><span class="o">.</span><span class="kt">East</span> <span class="c1">// false</span></code></pre></figure>

<p>Comparing cases in these enumerations works <em>out-of-the-box</em> because enumerations that have cases of a raw-value type implicitly conform to the <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Reference/Swift_RawRepresentable_Protocol/index.html#//apple_ref/swift/intf/s:PSs16RawRepresentable">RawRepresentable</a> protocol. The Swift Standard Library provides implementations of the <code class="highlighter-rouge">==</code> operator for <code class="highlighter-rouge">RawRepresentable</code> types and generic <code class="highlighter-rouge">T</code> types.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// Used to compare 'Math' enum</span>
<span class="kd">func</span> <span class="o">==&lt;</span><span class="kt">T</span> <span class="p">:</span> <span class="kt">RawRepresentable</span> <span class="k">where</span> <span class="kt">T</span><span class="o">.</span><span class="kt">RawValue</span> <span class="p">:</span> <span class="kt">Equatable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">T</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>

<span class="c1">// Used to compare 'CompassPoint' enum</span>
<span class="kd">func</span> <span class="o">==&lt;</span><span class="kt">T</span> <span class="p">:</span> <span class="kt">Equatable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">T</span><span class="p">?,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">T</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span></code></pre></figure>

<p>It is easy to see how and why this works. For the <code class="highlighter-rouge">RawRepresentable</code> type, as long as the <code class="highlighter-rouge">rawValue</code> conforms to <code class="highlighter-rouge">Equatable</code>, then all this function has to do is compare the raw-value from each type. Without a raw-value, the different enumeration members are fully-fledged values in their own right. But if the some cases of the enumeration have <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Enumerations.html#//apple_ref/doc/uid/TP40014097-CH12-ID148">associated values</a>, then you must implement the <code class="highlighter-rouge">==</code> operator yourself. Consider the following example.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="kt">Barcode</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">UPCA</span><span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">)</span>
    <span class="k">case</span> <span class="kt">QRCode</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>
    <span class="k">case</span> <span class="kt">None</span>
<span class="p">}</span>

<span class="c1">// Error: binary operator '==' cannot be applied to two Barcode operands</span>
<span class="kt">Barcode</span><span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="s">"code"</span><span class="p">)</span> <span class="o">==</span> <span class="kt">Barcode</span><span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="s">"code"</span><span class="p">)</span></code></pre></figure>

<p>If you are well versed in Swift’s pattern matching capabilities, then conforming to <code class="highlighter-rouge">Equatable</code> is very straightforward.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">extension</span> <span class="kt">Barcode</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="o">==</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Barcode</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Barcode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">(</span><span class="kd">let</span> <span class="o">.</span><span class="kt">UPCA</span><span class="p">(</span><span class="n">codeA1</span><span class="p">,</span> <span class="n">codeB1</span><span class="p">),</span> <span class="kd">let</span> <span class="o">.</span><span class="kt">UPCA</span><span class="p">(</span><span class="n">codeA2</span><span class="p">,</span> <span class="n">codeB2</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">codeA1</span> <span class="o">==</span> <span class="n">codeA2</span> <span class="o">&amp;&amp;</span> <span class="n">codeB1</span> <span class="o">==</span> <span class="n">codeB2</span>

    <span class="k">case</span> <span class="p">(</span><span class="kd">let</span> <span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="n">code1</span><span class="p">),</span> <span class="kd">let</span> <span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="n">code2</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">code1</span> <span class="o">==</span> <span class="n">code2</span>

    <span class="k">case</span> <span class="p">(</span><span class="o">.</span><span class="kt">None</span><span class="p">,</span> <span class="o">.</span><span class="kt">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">true</span>

    <span class="k">default</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">Barcode</span><span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="s">"code"</span><span class="p">)</span> <span class="o">==</span> <span class="kt">Barcode</span><span class="o">.</span><span class="kt">QRCode</span><span class="p">(</span><span class="s">"code"</span><span class="p">)</span> <span class="c1">// true</span>
<span class="kt">Barcode</span><span class="o">.</span><span class="kt">UPCA</span><span class="p">(</span><span class="mi">1234</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span> <span class="o">==</span> <span class="kt">Barcode</span><span class="o">.</span><span class="kt">UPCA</span><span class="p">(</span><span class="mi">4567</span><span class="p">,</span> <span class="mi">7890</span><span class="p">)</span> <span class="c1">// false</span>
<span class="kt">Barcode</span><span class="o">.</span><span class="kt">None</span> <span class="o">==</span> <span class="kt">Barcode</span><span class="o">.</span><span class="kt">None</span> <span class="c1">// true</span></code></pre></figure>

<p>Even with Swift 2.0, the syntax is a somewhat difficult to read and difficult to remember. We must pattern match on each case and then unpack the associated values (if any) to compare them directly. That’s it! Now we can compare our custom enumerations.</p>

   </div> <!-- post-content -->
</article>


<div class="post-share-subscribe">
   <div class="row">
      <div class="col-md-6 col-sm-6 col-xs-12 center">
         <div class="btn-group btn-group-justified" role="group">

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Share &nbsp;<i class="fa fa-share-alt" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li>
                     <a href="https://twitter.com/intent/tweet?text=Swift%20enumerations%20and%20equatable%20http://localhost:4000/blog/swift-enumerations-and-equatable/%20via%20@anver_bogatov" title="Tweet" target="_blank">
                     Twitter &nbsp;<i class="fa fa-twitter" aria-hidden="true"></i>
                     </a>
                  </li>
                  <li>
                     <a href="https://www.facebook.com/sharer.php?u=http://localhost:4000/blog/swift-enumerations-and-equatable/" title="Post" target="_blank">
                     Facebook &nbsp;<i class="fa fa-facebook" aria-hidden="true"></i>
                     </a>
                  </li>
                  <li>
                     <a href="https://plus.google.com/share?url=http://localhost:4000/blog/swift-enumerations-and-equatable/" title="Share" target="_blank">
                     Google &nbsp;<i class="fa fa-google-plus" aria-hidden="true"></i>
                     </a>
                  </li>
               </ul>
            </div> <!-- share dropup -->

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Subscribe &nbsp;<i class="fa fa-rss" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li><a href="/feed.xml" title="Subscribe via RSS/atom">RSS/Atom &nbsp;<i class="fa fa-rss" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Add to Apple News">Apple News &nbsp;<i class="fa fa-apple" aria-hidden="true"></i></a></li>
               </ul>
            </div> <!-- subscribe drop-up -->

            <div class="btn-group dropup" role="group">
               <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Support &nbsp;<i class="fa fa-star" aria-hidden="true"></i>
               </button>
               <ul class="dropdown-menu">
                  <li><a href="" title="Donate via PayPal" target="_blank">Donate via PayPal &nbsp;<i class="fa fa-paypal" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Donate via Square Cash" target="_blank">Donate via Square &nbsp;<i class="fa fa-dollar" aria-hidden="true"></i></a></li>
                  <li><a href="" title="Donate Bitcoin" target="_blank">Donate Bitcoin &nbsp;<i class="fa fa-btc" aria-hidden="true"></i></a></li>
               </ul>
            </div> <!-- donate drop-up -->

         </div> <!-- btn-group -->
      </div> <!-- col -->
   </div> <!-- row -->

   <div class="row feedback">
      <div class="col-md-6 col-sm-6 col-xs-12 center">
         <p class="text-muted text-center"><small><b>Questions? Feedback? Corrections?</b></small></p>
         <p class="text-muted text-center"><small>
         Open an <a href="https://github.com/anverbogatov/anverbogatov.github.io/issues/new" target="_blank">issue</a> or
         submit a <a href="https://github.com/anverbogatov/anverbogatov.github.io/compare" target="_blank">pull request</a>.
         </small></p>
      </div> <!-- col -->
   </div> <!-- row -->

</div> <!-- post-share-subscribe -->


            </div> <!-- col -->
         </div> <!-- row -->
      </div> <!-- container -->

      
<footer class="container container-fluid">
   <hr>

   <div class="row contact">
    <div class="col-sm-12 col-sm-offset-0 col-md-8 col-md-offset-2">
        <ul class="inline center">
            <li><a href="https://github.com/anverbogatov" title="Follow me on Github"><i class="fa fa-2x fa-github" aria-hidden="true"></i></a></li>
            <li><a href="https://twitter.com/anver_bogatov" title="Follow me on Twitter"><i class="fa fa-2x fa-twitter" aria-hidden="true"></i></a></li>
            <li><a href="https://www.linkedin.com/in/anver-bogatov-64b32661/" title="Connect with me on LinkedIn"><i class="fa fa-2x fa-linkedin" aria-hidden="true"></i></a></li>
            <li><a href="/feed.xml" title="Subscribe via RSS/atom"><i class="fa fa-2x fa-rss-square" aria-hidden="true"></i></a></li>
            <li><a href="" title="Add to Apple News"><i class="fa fa-2x fa-apple" aria-hidden="true"></i></a></li>
        </ul>
    </div> <!-- col -->
</div> <!-- row -->


   <p class="text-muted text-center"><small>
   &copy; 2017 Anver Bogatov.
   This site is <a href="https://github.com/anverbogatov/anverbogatov.github.io">open source</a>.
   </small></p>
</footer>

      
<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

   </body>
</html>
